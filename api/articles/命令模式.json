{"title":"命令模式","uid":"35b7e7d45f0bf660fac88351c60754e3","slug":"命令模式","date":"2020-08-04T16:00:00.000Z","updated":"2023-12-18T13:28:22.546Z","comments":true,"path":"api/articles/命令模式.json","keywords":null,"cover":"https://images.pexels.com/photos/814499/pexels-photo-814499.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","content":"<h2 id=\"描述\"><a href=\"#描述\" class=\"headerlink\" title=\"描述\"></a>描述</h2><p>命令模式（Command Pattern）是一种数据驱动的设计模式，它属于行为型模式。请求以命令的形式包裹在对象中，并传给调用对象。调用对象寻找可以处理该命令的合适的对象，并把该命令传给相应的对象，该对象执行命令。</p>\n<h2 id=\"应用场景\"><a href=\"#应用场景\" class=\"headerlink\" title=\"应用场景\"></a>应用场景</h2><p>gui 交互时可以使用。</p>\n<ul>\n<li>快捷键所触发的指令</li>\n<li>cmd类指令式交互界面</li>\n</ul>\n<h2 id=\"游戏中的实例\"><a href=\"#游戏中的实例\" class=\"headerlink\" title=\"游戏中的实例\"></a>游戏中的实例</h2><ul>\n<li>回放功能: 只需要记录指令栈即可；</li>\n<li>宏命令功能: 将指令进行压缩，变成一个指令队列顺序执行；</li>\n<li>撤销（上一步）功能: 在命令中添加<code>undo</code>接口，并记录最后一次状态改变的值；</li>\n<li>键盘按键释放技能: 按下指定按键时，触发指定命令请求指定功能；</li>\n<li>技能按键绑定。</li>\n</ul>\n<h2 id=\"模式角色\"><a href=\"#模式角色\" class=\"headerlink\" title=\"模式角色\"></a>模式角色</h2><ol>\n<li><p>指令基类（command）</p>\n</li>\n<li><p>接收器（received）</p>\n</li>\n<li><p>请求发生器（invoker）</p>\n</li>\n<li><p>具体命令，继承自指令基类（ConcreteCommand）</p>\n</li>\n</ol>\n<h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h2><p>接收器，收音机</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">public</span><span style=\"color: #E06C75\"> </span><span style=\"color: #C678DD\">class</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">AudioPlayer</span><span style=\"color: #E06C75\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> play</span><span style=\"color: #ABB2BF\">()</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">System</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">out</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">println</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;播放...&quot;</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> rewind</span><span style=\"color: #ABB2BF\">()</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">System</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">out</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">println</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;倒带...&quot;</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> stop</span><span style=\"color: #ABB2BF\">()</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">System</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">out</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">println</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;停止...&quot;</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">&#125;</span></span></code></pre></div><p>命令基类</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">public</span><span style=\"color: #E06C75\"> </span><span style=\"color: #C678DD\">interface</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">Command</span><span style=\"color: #E06C75\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">    /**</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">     * 执行方法</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> execute</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">&#125;</span></span></code></pre></div><p>命令具体实现类</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">public</span><span style=\"color: #E06C75\"> </span><span style=\"color: #C678DD\">class</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">PlayCommand</span><span style=\"color: #E06C75\"> </span><span style=\"color: #C678DD\">implements</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">Command</span><span style=\"color: #E06C75\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">private</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">AudioPlayer</span><span style=\"color: #E06C75\"> myAudio</span><span style=\"color: #ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> PlayCommand</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">AudioPlayer</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75; font-style: italic\">audioPlayer</span><span style=\"color: #ABB2BF\">)</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        myAudio </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> audioPlayer;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">    /**</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">     * 执行方法</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #ABB2BF\">@</span><span style=\"color: #E5C07B\">Override</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> execute</span><span style=\"color: #ABB2BF\">()</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">myAudio</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">play</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">&#125;</span></span></code></pre></div><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">public</span><span style=\"color: #E06C75\"> </span><span style=\"color: #C678DD\">class</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">RewindCommand</span><span style=\"color: #E06C75\"> </span><span style=\"color: #C678DD\">implements</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">Command</span><span style=\"color: #E06C75\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">private</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">AudioPlayer</span><span style=\"color: #E06C75\"> myAudio</span><span style=\"color: #ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> RewindCommand</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">AudioPlayer</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75; font-style: italic\">myAudio</span><span style=\"color: #ABB2BF\">)</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">this</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">myAudio</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> myAudio;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #ABB2BF\">@</span><span style=\"color: #E5C07B\">Override</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> execute</span><span style=\"color: #ABB2BF\">()</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">myAudio</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">rewind</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">&#125;</span></span></code></pre></div><p>请求发生器，键盘输入</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">public</span><span style=\"color: #E06C75\"> </span><span style=\"color: #C678DD\">class</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">Keypad</span><span style=\"color: #E06C75\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">private</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">Command</span><span style=\"color: #E06C75\"> playCommand</span><span style=\"color: #ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">private</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">Command</span><span style=\"color: #E06C75\"> rewindCommand</span><span style=\"color: #ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">private</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">Command</span><span style=\"color: #E06C75\"> stopCommand</span><span style=\"color: #ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> setPlayCommand</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">Command</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75; font-style: italic\">playCommand</span><span style=\"color: #ABB2BF\">)</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">this</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">playCommand</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> playCommand;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> setRewindCommand</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">Command</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75; font-style: italic\">rewindCommand</span><span style=\"color: #ABB2BF\">)</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">this</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">rewindCommand</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> rewindCommand;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> setStopCommand</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">Command</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75; font-style: italic\">stopCommand</span><span style=\"color: #ABB2BF\">)</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">this</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">stopCommand</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> stopCommand;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">    /**</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">     * 执行播放方法</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> play</span><span style=\"color: #ABB2BF\">()</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">playCommand</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">execute</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">    /**</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">     * 执行倒带方法</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> rewind</span><span style=\"color: #ABB2BF\">()</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">rewindCommand</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">execute</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">    /**</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">     * 执行播放方法</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> stop</span><span style=\"color: #ABB2BF\">()</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">stopCommand</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">execute</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">&#125;</span></span></code></pre></div><p>客户端调用</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">public</span><span style=\"color: #E06C75\"> </span><span style=\"color: #C678DD\">class</span><span style=\"color: #E06C75\"> </span><span style=\"color: #E5C07B\">Julia</span><span style=\"color: #E06C75\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">    </span><span style=\"color: #C678DD\">public</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">static</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">void</span><span style=\"color: #61AFEF\"> main</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">String</span><span style=\"color: #ABB2BF\">[] </span><span style=\"color: #E06C75; font-style: italic\">args</span><span style=\"color: #ABB2BF\">)</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #7F848E; font-style: italic\">// 创建接收者对象</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">AudioPlayer</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">audioPlayer</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">new</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">AudioPlayer</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #7F848E; font-style: italic\">// 创建命令对象</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">Command</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">playCommand</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">new</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">PlayCommand</span><span style=\"color: #ABB2BF\">(audioPlayer);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">Command</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">rewindCommand</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">new</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">RewindCommand</span><span style=\"color: #ABB2BF\">(audioPlayer);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">Command</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">stopCommand</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">new</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">StopCommand</span><span style=\"color: #ABB2BF\">(audioPlayer);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #7F848E; font-style: italic\">// 创建请求对象</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">Keypad</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">keypad</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">new</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">Keypad</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">keypad</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">setPlayCommand</span><span style=\"color: #ABB2BF\">(playCommand);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">keypad</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">setRewindCommand</span><span style=\"color: #ABB2BF\">(rewindCommand);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">keypad</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">setStopCommand</span><span style=\"color: #ABB2BF\">(stopCommand);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #7F848E; font-style: italic\">// 测试</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">keypad</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">play</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">keypad</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">rewind</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">keypad</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">stop</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">keypad</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">play</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">keypad</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">stop</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">&#125;</span></span></code></pre></div>","text":"描述命令模式（Command Pattern）是一种数据驱动的设计模式，它属于行为型模式。请求以命令的形式包裹在对象中，并传给调用对象。调用对象寻找可以处理该命...","permalink":"/post/命令模式","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"设计模式","slug":"设计模式","count":4,"path":"api/tags/设计模式.json"},{"name":"游戏设计模式","slug":"游戏设计模式","count":3,"path":"api/tags/游戏设计模式.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%8F%8F%E8%BF%B0\"><span class=\"toc-text\">描述</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">应用场景</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B8%B8%E6%88%8F%E4%B8%AD%E7%9A%84%E5%AE%9E%E4%BE%8B\"><span class=\"toc-text\">游戏中的实例</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%BC%8F%E8%A7%92%E8%89%B2\"><span class=\"toc-text\">模式角色</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">实现</span></a></li></ol>","author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"观察者模式","uid":"cd55e9d94b94ab2ca447027ce4beeca6","slug":"观察者模式","date":"2020-08-11T16:00:00.000Z","updated":"2023-12-18T13:28:20.008Z","comments":true,"path":"api/articles/观察者模式.json","keywords":null,"cover":"https://images.pexels.com/photos/53184/peacock-bird-plumage-color-53184.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","text":"描述观察者模式通过“主题”与“观察者”以低耦合的方式来解决对象间存在的一对多关系，如某一对象状态发生改变时，对其他依赖组件发送通知并自动更新。 应用场景具有一对...","permalink":"/post/观察者模式","photos":[],"count_time":{"symbolsCount":301,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"设计模式","slug":"设计模式","count":4,"path":"api/tags/设计模式.json"},{"name":"游戏设计模式","slug":"游戏设计模式","count":3,"path":"api/tags/游戏设计模式.json"}],"author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"MonoGame Nez分辨率切换ui定位不准","uid":"4733d01d48a0a10d2db65c3579578d4b","slug":"MonoGame Nez分辨率切换ui定位不准","date":"2020-06-18T16:00:00.000Z","updated":"2023-12-18T13:12:34.659Z","comments":true,"path":"api/articles/MonoGame Nez分辨率切换ui定位不准.json","keywords":null,"cover":"https://images.pexels.com/photos/598917/pexels-photo-598917.jpeg?auto=compress&cs=tinysrgb&dpr=3&h=750&w=1260","text":"在设置Stage.IsFullScreen属性为true时，切换分辨率会导致ui点击位置发生偏移，所以只需要把该属性设置为false或者不设置即可。 在设置Ca...","permalink":"/post/MonoGame Nez分辨率切换ui定位不准","photos":[],"count_time":{"symbolsCount":172,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"游戏开发","slug":"游戏开发","count":10,"path":"api/tags/游戏开发.json"},{"name":"MonoGame","slug":"MonoGame","count":4,"path":"api/tags/MonoGame.json"},{"name":"Nez","slug":"Nez","count":2,"path":"api/tags/Nez.json"}],"author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}
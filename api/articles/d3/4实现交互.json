{"title":"d3入门「四」：实现交互","uid":"0541b8b181491af42712df40ab16bcdd","slug":"d3/4实现交互","date":"2025-09-28T11:13:23.519Z","updated":"2025-09-28T11:37:32.565Z","comments":true,"path":"api/articles/d3/4实现交互.json","keywords":null,"cover":"https://cdn.stocksnap.io/img-thumbs/280h/ETRVZT98ZC.jpg","content":"<h2 id=\"实现交互\"><a href=\"#实现交互\" class=\"headerlink\" title=\"实现交互\"></a>实现交互</h2><h3 id=\"Zoom-缩放交互行为-缩放、平移\"><a href=\"#Zoom-缩放交互行为-缩放、平移\" class=\"headerlink\" title=\"Zoom 缩放交互行为 (缩放、平移)\"></a>Zoom 缩放交互行为 (缩放、平移)</h3><p>D3 提供了一种灵活的抽象，提供了缩放、平移的能力，可以处理各种各样的输入模式和浏览器异常。缩放行为与 DOM 无关，因此可以将其与 HTML、 SVG 或 Canvas 一起使用，或者其他任何需要缩放的地方。</p>\n<p>要使用缩放交互行为，分为一下几个步骤：</p>\n<p>1、创建缩放行为</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">zoom</span><span style=\"color: #ABB2BF\">()</span></span></code></pre></div><p>2、注册缩放事件</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">zoom</span><span style=\"color: #ABB2BF\">  </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">zoom</span><span style=\"color: #ABB2BF\">().</span><span style=\"color: #61AFEF\">on</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"zoom\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">zoomed</span><span style=\"color: #ABB2BF\">) </span><span style=\"color: #7F848E; font-style: italic\">// 注册缩放事件</span></span></code></pre></div><p>3、绑定到元素</p>\n<p>此处必须使用选择器调用，所以先使用选择器选择一下。</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #E5C07B\">selection</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">call</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">zoomed</span><span style=\"color: #ABB2BF\">)</span></span></code></pre></div><p>4、缩放事件处理</p>\n<p>事件会传入一个缩放对象，包含了一个 transform 对象，这个对象就是 svg 中的 transform 属性，其中包含了：x，y，k (缩放率) 三个参数，可以根据情况自行使用。</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">zoomed</span><span style=\"color: #ABB2BF\">({</span><span style=\"color: #E06C75; font-style: italic\">transform</span><span style=\"color: #ABB2BF\">}) {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #E5C07B\">circle</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"transform\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">d</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">`translate(</span><span style=\"color: #C678DD\">${</span><span style=\"color: #E5C07B\">transform</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">apply</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">d</span><span style=\"color: #ABB2BF\">)</span><span style=\"color: #C678DD\">}</span><span style=\"color: #98C379\">)`</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">}</span></span></code></pre></div><p>5、画布的缩放和平移</p>\n<p>上面的例子只是缩放、移动了一个元素，有时候我们更多的需要的是缩放和平移整个画布，所以我们会想到，直接处理 svg 元素移动。</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">zoomed</span><span style=\"color: #ABB2BF\">({</span><span style=\"color: #E06C75; font-style: italic\">transform</span><span style=\"color: #ABB2BF\">}) {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #E5C07B\">svg</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"transform\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">d</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">`translate(</span><span style=\"color: #C678DD\">${</span><span style=\"color: #E5C07B\">transform</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">apply</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">d</span><span style=\"color: #ABB2BF\">)</span><span style=\"color: #C678DD\">}</span><span style=\"color: #98C379\">)`</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">}</span></span></code></pre></div><p>但是这种实现是不可以的，因为 svg 元素一移动的话，会导致页面布局的混乱，并且实际操作体验也是一卡一卡的。</p>\n<p>为了避免这种情况，需要添加一个 g 元素作为顶层的元素，代替 svg 的位置，然后移动这个 g 就可以实现丝滑的移动效果。</p>\n<p>所以正确的实现是：</p>\n<ul>\n<li>在 svg 元素上监听行为事件</li>\n<li>在事件处理中处理顶层的 g 元素进行平移和缩放</li>\n</ul>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">zoomed</span><span style=\"color: #ABB2BF\">({</span><span style=\"color: #E06C75; font-style: italic\">transform</span><span style=\"color: #ABB2BF\">}) {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #E5C07B\">rootG</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"transform\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">d</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">`translate(</span><span style=\"color: #C678DD\">${</span><span style=\"color: #E5C07B\">transform</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">apply</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">d</span><span style=\"color: #ABB2BF\">)</span><span style=\"color: #C678DD\">}</span><span style=\"color: #98C379\">)`</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">}</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><strong>NOTE</strong></p>\n<p>有时候这种实现会导致元素的布局不符合需求，比如一部分需要一定一部分不需要移动，所以如何选择顶层的 g 元素，是需要根据是业务场景进行灵活应用的。</p></blockquote>\n<p><strong>默认的缩放与平移</strong></p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">svg</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">call</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">zoom</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">transform</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">zoomIdentity</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">translate</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">initialTranslate</span><span style=\"color: #ABB2BF\">[</span><span style=\"color: #D19A66\">0</span><span style=\"color: #ABB2BF\">], </span><span style=\"color: #E06C75\">initialTranslate</span><span style=\"color: #ABB2BF\">[</span><span style=\"color: #D19A66\">1</span><span style=\"color: #ABB2BF\">]).</span><span style=\"color: #61AFEF\">scale</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">initialScale</span><span style=\"color: #ABB2BF\">));</span></span></code></pre></div><h3 id=\"Drag-拖曳行为\"><a href=\"#Drag-拖曳行为\" class=\"headerlink\" title=\"Drag 拖曳行为\"></a>Drag 拖曳行为</h3><p>拖曳元素也是经常出现的业务场景，D3 也提供了一个交互行为来方便开发。</p>\n<p>其注册方式与缩放行为一致，只不过调用的元素多为页面中明确的一个元素。</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 注册拖曳行为</span></span>\n<span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">drag</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">drag</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 给全部的node添加拖曳行为</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\".node\"</span><span style=\"color: #ABB2BF\">).</span><span style=\"color: #61AFEF\">call</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">drag</span><span style=\"color: #ABB2BF\">().</span><span style=\"color: #61AFEF\">on</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"start\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">started</span><span style=\"color: #ABB2BF\">));</span></span></code></pre></div><p><strong>事件列表</strong></p>\n<p>拖曳提供了三种钩子事件：</p>\n<ul>\n<li>Start：拖曳开始</li>\n<li>Drag：拖曳中</li>\n<li>End：拖曳结束</li>\n</ul>\n<h3 id=\"过渡效果\"><a href=\"#过渡效果\" class=\"headerlink\" title=\"过渡效果\"></a>过渡效果</h3><p>D3 提供了一个简易的过渡效果 Api，可以实现大部分简单的动效。</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"body\"</span><span style=\"color: #ABB2BF\">) </span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">transition</span><span style=\"color: #ABB2BF\">() </span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"background-color\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"red\"</span><span style=\"color: #ABB2BF\">);</span></span></code></pre></div><p>写起来非常的简单，在 transition 方法后写过渡后的属性值即可。</p>\n<p><strong>延迟执行</strong></p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">transition</span><span style=\"color: #ABB2BF\">()</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">duration</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #D19A66\">750</span><span style=\"color: #ABB2BF\">) </span><span style=\"color: #7F848E; font-style: italic\">// 延迟750毫秒执行</span></span></code></pre></div><p><strong>设置缓动曲线</strong></p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">t</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">transition</span><span style=\"color: #ABB2BF\">()</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">duration</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #D19A66\">750</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">ease</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">easeLinear</span><span style=\"color: #ABB2BF\">); </span><span style=\"color: #7F848E; font-style: italic\">// 设置线性变换</span></span></code></pre></div><p><strong>复用</strong></p>\n<p>有时候写了一个动效的规则，但是想应用到多重元素上，比如延迟 750 秒后执行，使用线性变换，此时可以这么写：</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">t</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">transition</span><span style=\"color: #ABB2BF\">()</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">duration</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #D19A66\">750</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">ease</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">easeLinear</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\".apple\"</span><span style=\"color: #ABB2BF\">).</span><span style=\"color: #61AFEF\">transition</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">t</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"fill\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"red\"</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\".orange\"</span><span style=\"color: #ABB2BF\">).</span><span style=\"color: #61AFEF\">transition</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">t</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"fill\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"orange\"</span><span style=\"color: #ABB2BF\">);</span></span></code></pre></div><p><strong>其他能力</strong></p>\n<p>D3 的过渡效果还提供了很多功能，比如中断，效果合并，动效事件等功能，但是目前来看项目中需求不大，等到后续需要或者有时间再详细研究。</p>\n<p>如果真的需要做非常复杂的动画时，更多的建议是使用专业动画库 <strong>GSAP</strong> </p>\n<h3 id=\"自定义事件\"><a href=\"#自定义事件\" class=\"headerlink\" title=\"自定义事件\"></a>自定义事件</h3><p>D3 也提供了一套事件机制，开发时可以使用该机制定制一些自定义的事件或触发一个 D3 内部的事件。</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 创建一个事件派发器</span></span>\n<span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">dispatch</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">dispatch</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"start\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"end\"</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 监听事件</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">circle</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">on</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"start\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">started</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 触发事件并发送参数</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">dispatch</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">call</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"start\"</span><span style=\"color: #ABB2BF\">, {</span><span style=\"color: #E06C75\">about</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #98C379\">\"I am a context object\"</span><span style=\"color: #ABB2BF\">}, </span><span style=\"color: #98C379\">\"I am an argument\"</span><span style=\"color: #ABB2BF\">);</span></span></code></pre></div>","text":"实现交互Zoom 缩放交互行为 (缩放、平移)D3 提供了一种灵活的抽象，提供了缩放、平移的能力，可以处理各种各样的输入模式和浏览器异常。缩放行为与 DOM 无...","permalink":"/post/d3/4实现交互","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[{"name":"d3","slug":"d3","count":5,"path":"api/categories/d3.json"}],"tags":[{"name":"d3","slug":"d3","count":5,"path":"api/tags/d3.json"},{"name":"数据可视化","slug":"数据可视化","count":5,"path":"api/tags/数据可视化.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E7%8E%B0%E4%BA%A4%E4%BA%92\"><span class=\"toc-text\">实现交互</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Zoom-%E7%BC%A9%E6%94%BE%E4%BA%A4%E4%BA%92%E8%A1%8C%E4%B8%BA-%E7%BC%A9%E6%94%BE%E3%80%81%E5%B9%B3%E7%A7%BB\"><span class=\"toc-text\">Zoom 缩放交互行为 (缩放、平移)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Drag-%E6%8B%96%E6%9B%B3%E8%A1%8C%E4%B8%BA\"><span class=\"toc-text\">Drag 拖曳行为</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%87%E6%B8%A1%E6%95%88%E6%9E%9C\"><span class=\"toc-text\">过渡效果</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6\"><span class=\"toc-text\">自定义事件</span></a></li></ol></li></ol>","author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"d3入门「二」：坐标轴","uid":"19913a561c17745f039cc9be34bd6d4b","slug":"d3/2坐标轴","date":"2025-09-28T11:17:00.458Z","updated":"2025-09-28T14:04:23.079Z","comments":true,"path":"api/articles/d3/2坐标轴.json","keywords":null,"cover":"https://cdn.stocksnap.io/img-thumbs/280h/flower-pot_J2GISBRQTQ.jpg","text":"概述[[D3JS|D3]] 内置的坐标轴组件，用于快速渲染坐标轴到屏幕上，适用于大多数的[[比例尺-scale|比例尺]] 类型，包括线性比例尺、对数比例尺、波...","permalink":"/post/d3/2坐标轴","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"d3","slug":"d3","count":5,"path":"api/categories/d3.json"}],"tags":[{"name":"d3","slug":"d3","count":5,"path":"api/tags/d3.json"},{"name":"数据可视化","slug":"数据可视化","count":5,"path":"api/tags/数据可视化.json"}],"author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"d3入门「三」：比例尺","uid":"232b42d69dd976bd6905d7c3b08f3b90","slug":"d3/3比例尺","date":"2025-09-28T07:38:44.886Z","updated":"2025-09-28T11:27:14.899Z","comments":true,"path":"api/articles/d3/3比例尺.json","keywords":null,"cover":"https://cdn.stocksnap.io/img-thumbs/280h/PQQREB6ZCV.jpg","text":"比例尺比例尺在可视化开发中有非常多的应用，比如：一段时间映射到时间轴、一段比例映射到一个宽度、将一个范围以对数方式映射到界面中等，本小节简单介绍一下项目中常用的...","permalink":"/post/d3/3比例尺","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"d3","slug":"d3","count":5,"path":"api/categories/d3.json"}],"tags":[{"name":"d3","slug":"d3","count":5,"path":"api/tags/d3.json"},{"name":"数据可视化","slug":"数据可视化","count":5,"path":"api/tags/数据可视化.json"}],"author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}
{"title":"d3入门「一」：在项目中使用d3","uid":"65dc118887986eec94800b37afb1763d","slug":"d3/1为什么使用D3","date":"2025-09-28T07:01:07.521Z","updated":"2025-09-28T07:38:07.348Z","comments":true,"path":"api/articles/d3/1为什么使用D3.json","keywords":null,"cover":"https://cdn.stocksnap.io/img-thumbs/960w/curious-sheep_QNQ5HNPDTJ.jpg","content":"<h2 id=\"为什么使用D3\"><a href=\"#为什么使用D3\" class=\"headerlink\" title=\"为什么使用D3\"></a>为什么使用D3</h2><p>D3 的全称是 <strong>Data-Driven Document</strong> 即<strong>数据驱动文档</strong>，是一个基于数据操作 DOM 的 Javascript 库，也是现有最流行、社区规模最大、支持图元级定制化的可视化开发框架。</p>\n<p>主要用途是用来进行可视化图形的生成和处理，其核心理念是：将抽象的数据绑定到特定的 DOM 元素，通过数据的变动来驱动 DOM 文档的变化。</p>\n<p>在项目中引入 D3 的考量主要是有以下一些原因：</p>\n<p><strong>提升开发效率</strong></p>\n<p>D3 的基本功能在原生的 DOM API 中都可以实现，之所以引入 D3 是因为原生 API 操作太过于繁琐且有些功能需要自己实现，而 D3 对 [[SVG]] 的操作快速，功能齐全，因此引入 D3 对涉及操作 [[SVG]] 的场景的开发效率提升是非常明显的。</p>\n<p><strong>实现图片无法实现的精确状态展示</strong></p>\n<p>在一些有<strong>设备状态监控</strong>需求的项目中，一般使用复杂的 [[SVG]] 图可视化的展示设备（比如飞机选座），此时需要对图中的元素有精确的控制，这个是图片无法做到的。</p>\n<p><strong>图表的高度定制化</strong></p>\n<p>图表虽说一般使用 Echarts、G2 等库实现，但是通用库还是一些痛点：</p>\n<ul>\n<li>表达效果不满足客户需求，需要定制化图表</li>\n<li>没有提供对应的配置接口，无法实现设计的效果，使用接口自定义又太麻烦</li>\n<li>某些业务场景限制无法集成图表库或集成成本太高</li>\n<li>本身没有相关实现，比如可操作的甘特图、关系图等</li>\n<li>不能仅使用图表中的一部分组件功能</li>\n</ul>\n<p>因此提供了图元级定制化能力的D3就可以在这些场景下很好的补充空缺。</p>\n<p><strong>强大的可视化工具库</strong></p>\n<p>D3 中提供了大量功能强大的工具库，这些库在开发数据可视化以及其他数据联动的场景时都是非常好用且高效的，比如：</p>\n<ul>\n<li>强大的选择器功能</li>\n<li>Geo 库，提供了场景的投影、坐标转换工具</li>\n<li>各种开箱即用的布局工具，比如树状图、折线图、饼图等</li>\n<li>数据处理工具，提供了随机数据生成、时间处理、通用数据处理成可视化可用的数据等</li>\n<li>缓动效果 </li>\n<li>各种算法的实现，比如：四叉树、等高线计算、多边形切分、力导向算法等</li>\n</ul>\n<p>因为这些工具库的存在，使得D3在即使不是可视化业务场景下也可以用来提升开发效率。</p>\n<h2 id=\"使用-D3\"><a href=\"#使用-D3\" class=\"headerlink\" title=\"使用 D3\"></a>使用 D3</h2><p>在项目中使用 D3 是非常简单的，简单的引入就可以了</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// npm install d3  或  yarn add d3</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 在页面中</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 全量引入</span></span>\n<span class=\"line\"><span style=\"color: #C678DD\">import</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">*</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">as</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">d3</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">from</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">\"d3\"</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 按需引入</span></span>\n<span class=\"line\"><span style=\"color: #C678DD\">import</span><span style=\"color: #ABB2BF\"> { </span><span style=\"color: #E06C75\">scaleLinear</span><span style=\"color: #ABB2BF\"> } </span><span style=\"color: #C678DD\">from</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">\"d3\"</span></span></code></pre></div><h2 id=\"选择器的使用\"><a href=\"#选择器的使用\" class=\"headerlink\" title=\"选择器的使用\"></a>选择器的使用</h2><p>D3 的选择器由于其面向可视化开发的设计内核，在 API 设计上提供很强大的元素选择能力和<strong>跨父元素组选</strong>能力，极大的提升了数据映射到文档时的处理效率。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><strong>NOTE</strong></p>\n<p>D3 的选择器是最常用的 API，一定要熟练使用才能发挥出最大的威力。</p></blockquote>\n<h3 id=\"选择元素\"><a href=\"#选择元素\" class=\"headerlink\" title=\"选择元素\"></a>选择元素</h3><p><strong>基础选择器</strong></p>\n<p>D3 在操作元素上类似 JQuery，是链式的:</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// D3 选择器</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"body\"</span><span style=\"color: #ABB2BF\">).</span><span style=\"color: #61AFEF\">append</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"div\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"div\"</span><span style=\"color: #ABB2BF\">).</span><span style=\"color: #61AFEF\">append</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"span\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// JQuery 选择器</span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">$</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"button\"</span><span style=\"color: #ABB2BF\">).</span><span style=\"color: #61AFEF\">click</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\">(){ </span><span style=\"color: #61AFEF\">$</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"p\"</span><span style=\"color: #ABB2BF\">)})</span></span></code></pre></div><p>同样的 D3 选择器也是基于 [[CSS选择器]] 实现的:</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7F848E; font-style: italic\">// ID 选择器</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"#chart\"</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 类选择器</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\".chart\"</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 标签选择器</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"svg\"</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 组合选择器</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\".chart-container svg.chart\"</span><span style=\"color: #ABB2BF\">);</span></span></code></pre></div><p>D3 中提供了两种选择器 API 用于满足各种场景，<strong>select(单元素选择器)</strong> 和 **selectAll(多元素选择器)**：</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 返回第一个class为chart的元素</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\".chart\"</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 返回全部class为chart的元素</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\".chart\"</span><span style=\"color: #ABB2BF\">);</span></span></code></pre></div><ul>\n<li>Select：选择与指定的选择器字符串匹配的第一个元素</li>\n<li>SelectAll：选择与指定的选择器字符串匹配的所有元素</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><strong>NOTE</strong></p>\n<p>当使用选择器选中一个元素时会返回一个 <strong>选择器对象 (Selelction)</strong> ，这个选择器对象是使用 D3 API 的基础</p></blockquote>\n<p><strong>跨父元素组选</strong></p>\n<p>当使用选择器选中了某一组元素并且想操作这一组元素中的相同子元素时，可以这样做：</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 对于每个选定的元素p，选择与指定的选择器字符串匹配的第一个子代元素b</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"p\"</span><span style=\"color: #ABB2BF\">).</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"b\"</span><span style=\"color: #ABB2BF\">); </span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 对于每个选定的元素p，选择与指定的选择器字符串匹配的子代元素b</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"p\"</span><span style=\"color: #ABB2BF\">).</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"b\"</span><span style=\"color: #ABB2BF\">); </span></span></code></pre></div><h3 id=\"添加元素\"><a href=\"#添加元素\" class=\"headerlink\" title=\"添加元素\"></a>添加元素</h3><p>D3 提供了 <strong>append</strong> 方法来添加元素：</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 添加一个矩形</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"g\"</span><span style=\"color: #ABB2BF\">) .</span><span style=\"color: #61AFEF\">append</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"rect\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 给每一个g都添加一个矩形</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"g\"</span><span style=\"color: #ABB2BF\">) .</span><span style=\"color: #61AFEF\">append</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"rect\"</span><span style=\"color: #ABB2BF\">)</span></span></code></pre></div><p>可以看到配合选择器可以快速的实现<strong>批量添加</strong>元素</p>\n<h3 id=\"编辑属性-样式\"><a href=\"#编辑属性-样式\" class=\"headerlink\" title=\"编辑属性&样式\"></a>编辑属性&amp;样式</h3><p>D3 针对于 DOM 元素和 [[SVG]] 元素提供了不同的 API 来编辑属性&amp;样式：</p>\n<p><strong>SVG 元素</strong></p>\n<p>使用 <strong>attr</strong> 来获取和设置属性</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 创建一个矩形，并且给他设置width:920，height:460</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"g\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">append</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"rect\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"width\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">920</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"height\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">460</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7F848E; font-style: italic\">// 获取rect的width属性 返回值为920</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"rect\"</span><span style=\"color: #ABB2BF\">).</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"width\"</span><span style=\"color: #ABB2BF\">) </span></span></code></pre></div><p><strong>DOM 元素</strong></p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 创建一个div，并且给他设置宽高并写入文本</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"body\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">append</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"div\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"width\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"920px\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"height\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"460px\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">html</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"Hello World!\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7F848E; font-style: italic\">// 获取div的宽度，返回指为 \"920px\"</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"div\"</span><span style=\"color: #ABB2BF\">).</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"width\"</span><span style=\"color: #ABB2BF\">)</span></span></code></pre></div><p><strong>配合选择器批量编辑属性</strong></p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7F848E; font-style: italic\">// 每一个div下的第一个class包含red-color的p标签都被设置成了红色</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"div.list-container\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"p.list-item.red-color\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"color\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"red\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"font-size\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"18px\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">html</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"每一个div下的第一个class包含red-color的p标签都被设置成了红色\"</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 每一个div下的全部class包含red-color的p标签都被设置成了红色</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"div.list-container\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"p.list-item.red-color\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"color\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"red\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"font-size\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"18px\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    .</span><span style=\"color: #61AFEF\">html</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"每一个div下的全部class包含red-color的p标签都被设置成了红色\"</span><span style=\"color: #ABB2BF\">);</span></span></code></pre></div>","feature":true,"text":"为什么使用D3D3 的全称是 Data-Driven Document 即数据驱动文档，是一个基于数据操作 DOM 的 Javascript 库，也是现有最流行...","permalink":"/post/d3/1为什么使用D3","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"d3","slug":"d3","count":2,"path":"api/categories/d3.json"}],"tags":[{"name":"d3","slug":"d3","count":2,"path":"api/tags/d3.json"},{"name":"数据可视化","slug":"数据可视化","count":2,"path":"api/tags/数据可视化.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8D3\"><span class=\"toc-text\">为什么使用D3</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8-D3\"><span class=\"toc-text\">使用 D3</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%80%89%E6%8B%A9%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">选择器的使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%80%89%E6%8B%A9%E5%85%83%E7%B4%A0\"><span class=\"toc-text\">选择元素</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0\"><span class=\"toc-text\">添加元素</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BC%96%E8%BE%91%E5%B1%9E%E6%80%A7-%E6%A0%B7%E5%BC%8F\"><span class=\"toc-text\">编辑属性&amp;样式</span></a></li></ol></li></ol>","author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"d3入门「一」：在项目中使用d3","uid":"65dc118887986eec94800b37afb1763d","slug":"d3/2比例尺","date":"2025-09-28T07:38:44.886Z","updated":"2025-09-28T09:20:10.326Z","comments":true,"path":"api/articles/d3/2比例尺.json","keywords":null,"cover":"https://cdn.stocksnap.io/img-thumbs/960w/curious-sheep_QNQ5HNPDTJ.jpg","text":"比例尺比例尺在可视化开发中有非常多的应用，比如：一段时间映射到时间轴、一段比例映射到一个宽度、将一个范围以对数方式映射到界面中等，本小节简单介绍一下项目中常用的...","permalink":"/post/d3/2比例尺","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"d3","slug":"d3","count":2,"path":"api/categories/d3.json"}],"tags":[{"name":"d3","slug":"d3","count":2,"path":"api/tags/d3.json"},{"name":"数据可视化","slug":"数据可视化","count":2,"path":"api/tags/数据可视化.json"}],"author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"OpenGL「四」：在文件中编写Shader","uid":"65e058b963273b5b3e940e3659fb3ebc","slug":"图形学/OpenGL/OpenGL4","date":"2021-12-29T16:00:00.000Z","updated":"2023-12-18T16:50:30.857Z","comments":true,"path":"api/articles/图形学/OpenGL/OpenGL4.json","keywords":null,"cover":"https://cdn.stocksnap.io/img-thumbs/960w/animal-face_2P4CSFCJYF.jpg","text":"前面用到了Shader绘制了一个红色的三角形，但是Shader是硬编码在代码中的，虽然是OpenGL想让我们这么写的，但是在实际开发中那肯定是不靠谱的，所以这次...","permalink":"/post/图形学/OpenGL/OpenGL4","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"图形学","slug":"图形学","count":5,"path":"api/categories/图形学.json"},{"name":"OpenGL","slug":"图形学/OpenGL","count":5,"path":"api/categories/图形学/OpenGL.json"}],"tags":[{"name":"游戏开发","slug":"游戏开发","count":10,"path":"api/tags/游戏开发.json"},{"name":"图形开发","slug":"图形开发","count":5,"path":"api/tags/图形开发.json"},{"name":"OpenGL","slug":"OpenGL","count":5,"path":"api/tags/OpenGL.json"}],"author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}
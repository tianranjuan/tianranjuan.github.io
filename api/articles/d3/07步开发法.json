{"title":"d3的7步开发法","uid":"5e69e1cf00eccada627cba6c5b3a1509","slug":"d3/07步开发法","date":"2025-09-28T14:01:52.646Z","updated":"2025-09-28T14:04:35.256Z","comments":true,"path":"api/articles/d3/07步开发法.json","keywords":null,"cover":"https://cdn.stocksnap.io/img-thumbs/280h/bird-spoonbill_OXW52JDMAI.jpg","content":"<p>根据《Fullstack D3 and Data Visualization》的核心方法论，开发数据可视化通常遵循以下 7 步流程，这些步骤结合了数据驱动文档（D3.Js）的核心思想和实际开发实践。以下是对每一步的详细解析及示例说明：</p>\n<p><img src=\"/image/d3/D3JS7%E6%AD%A5%E5%BC%80%E5%8F%91%E6%B3%95.png\" alt=\"D3JS7步开发法\"></p>\n<h2 id=\"1-获取数据（Access-Data）\"><a href=\"#1-获取数据（Access-Data）\" class=\"headerlink\" title=\"1. 获取数据（Access Data）\"></a>1. 获取数据（Access Data）</h2><p><strong>目标</strong>：加载并预处理数据，确保格式符合可视化需求。<br><strong>实现</strong>：  </p>\n<ul>\n<li>使用 D3 的 <code>d3.csv()</code>、<code>d3.json()</code> 等方法加载数据，或直接定义本地数据集。  </li>\n<li>对数据进行清洗（如处理缺失值、类型转换）。</li>\n</ul>\n<p><strong>示例</strong>：  </p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 从JSON文件加载天气数据</span></span>\n<span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">dataset</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">json</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"./weather_data.json\"</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 数据预处理：转换温度值为数字</span></span>\n<span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">processedData</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">dataset</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">map</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75; font-style: italic\">d</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> ({ ...</span><span style=\"color: #E06C75\">d</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">temperature</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #E5C07B\">d</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">temperature</span><span style=\"color: #ABB2BF\"> }));</span></span></code></pre></div><h2 id=\"2-定义图表尺寸（Create-Chart-Dimensions）\"><a href=\"#2-定义图表尺寸（Create-Chart-Dimensions）\" class=\"headerlink\" title=\"2. 定义图表尺寸（Create Chart Dimensions）\"></a>2. 定义图表尺寸（Create Chart Dimensions）</h2><p><strong>目标</strong>：确定图表容器的尺寸及边距，确保内容适配画布。<br><strong>实现</strong>：  </p>\n<ul>\n<li>定义包含画布宽高、边距的 <code>dimensions</code> 对象，并计算绘图区（bounded area）尺寸。</li>\n</ul>\n<p><strong>示例</strong>：  </p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">800</span><span style=\"color: #ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">600</span><span style=\"color: #ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #E06C75\">margin</span><span style=\"color: #ABB2BF\">: { </span><span style=\"color: #E06C75\">top</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">20</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">right</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">30</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">bottom</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">50</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">left</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">60</span><span style=\"color: #ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #E06C75\">boundedWidth</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">0</span><span style=\"color: #ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #E06C75\">boundedHeight</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">0</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">};</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 计算绘图区尺寸</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">boundedWidth</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">-</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">margin</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">left</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">-</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">margin</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">right</span><span style=\"color: #ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">boundedHeight</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">-</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">margin</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">top</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">-</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">margin</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">bottom</span><span style=\"color: #ABB2BF\">;</span></span></code></pre></div><h2 id=\"3-绘制画布（Draw-Canvas）\"><a href=\"#3-绘制画布（Draw-Canvas）\" class=\"headerlink\" title=\"3. 绘制画布（Draw Canvas）\"></a>3. 绘制画布（Draw Canvas）</h2><p><strong>目标</strong>：创建 [[SVG]] 容器并设置坐标系。<br><strong>实现</strong>：  </p>\n<ul>\n<li>使用 <code>d3.select()</code> 选择 DOM 元素，添加 SVG 并设置宽高。  </li>\n<li>添加 <code>&lt;g&gt;</code> 元素作为绘图区，通过 <code>transform</code> 调整边距偏移。</li>\n</ul>\n<p><strong>示例</strong>：  </p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">svg</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"#chart-container\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">append</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"svg\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"width\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"height\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">bounds</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">svg</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">append</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"g\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"transform\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">`translate(</span><span style=\"color: #C678DD\">${</span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">margin</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">left</span><span style=\"color: #C678DD\">}</span><span style=\"color: #98C379\">px, </span><span style=\"color: #C678DD\">${</span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">margin</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">top</span><span style=\"color: #C678DD\">}</span><span style=\"color: #98C379\">px)`</span><span style=\"color: #ABB2BF\">);</span></span></code></pre></div><h2 id=\"4-创建比例尺（Create-Scales）\"><a href=\"#4-创建比例尺（Create-Scales）\" class=\"headerlink\" title=\"4. 创建比例尺（Create Scales）\"></a>4. 创建比例尺（Create Scales）</h2><p><strong>目标</strong>：将数据域映射到视觉空间（如像素坐标）。<br><strong>实现</strong>：  </p>\n<ul>\n<li>根据数据类型选择比例尺（如 <code>scaleLinear</code>、<code>scaleBand</code>）。  </li>\n<li>设置 <code>domain</code>（数据范围）和 <code>range</code>（输出范围）。</li>\n</ul>\n<p><strong>示例（温度折线图）</strong>：  </p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">xScale</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">scaleTime</span><span style=\"color: #ABB2BF\">()</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">domain</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">extent</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">dataset</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">d</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">date</span><span style=\"color: #ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">range</span><span style=\"color: #ABB2BF\">([</span><span style=\"color: #D19A66\">0</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">boundedWidth</span><span style=\"color: #ABB2BF\">]);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">yScale</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">scaleLinear</span><span style=\"color: #ABB2BF\">()</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">domain</span><span style=\"color: #ABB2BF\">([</span><span style=\"color: #D19A66\">0</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">max</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">dataset</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">d</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">temperature</span><span style=\"color: #ABB2BF\">)])</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">range</span><span style=\"color: #ABB2BF\">([</span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">boundedHeight</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">0</span><span style=\"color: #ABB2BF\">]);</span></span></code></pre></div><h2 id=\"5-绘制数据（Draw-Data）\"><a href=\"#5-绘制数据（Draw-Data）\" class=\"headerlink\" title=\"5. 绘制数据（Draw Data）\"></a>5. 绘制数据（Draw Data）</h2><p><strong>目标</strong>：将数据绑定到 DOM 元素并生成可视化图形。<br><strong>实现</strong>：  </p>\n<ul>\n<li>使用 <code>selection.data()</code> 绑定数据，通过 <code>enter()</code> 处理新增数据。  </li>\n<li>调用图形生成器（如 <code>d3.line()</code>、<code>d3.arc()</code>）绘制图表。</li>\n</ul>\n<p><strong>示例（折线图）</strong>：  </p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">lineGenerator</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">line</span><span style=\"color: #ABB2BF\">()</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">x</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75; font-style: italic\">d</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">xScale</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">d</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">date</span><span style=\"color: #ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">y</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75; font-style: italic\">d</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">yScale</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">d</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">temperature</span><span style=\"color: #ABB2BF\">));</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">bounds</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">append</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"path\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">datum</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">dataset</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"d\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">lineGenerator</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"fill\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"none\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"stroke\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"steelblue\"</span><span style=\"color: #ABB2BF\">);</span></span></code></pre></div><h2 id=\"6-绘制外围元素（Draw-Peripherals）\"><a href=\"#6-绘制外围元素（Draw-Peripherals）\" class=\"headerlink\" title=\"6. 绘制外围元素（Draw Peripherals）\"></a>6. 绘制外围元素（Draw Peripherals）</h2><p><strong>目标</strong>：添加坐标轴、标签、图例等辅助元素。<br><strong>实现</strong>：  </p>\n<ul>\n<li>使用 <code>d3.axisBottom()</code> 和 <code>d3.axisLeft()</code> 生成坐标轴。  </li>\n<li>通过 <code>.call()</code> 方法将坐标轴添加到画布。</li>\n</ul>\n<p><strong>示例</strong>：  </p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 添加X轴</span></span>\n<span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">xAxis</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">bounds</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">append</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"g\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"transform\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">`translate(0, </span><span style=\"color: #C678DD\">${</span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">boundedHeight</span><span style=\"color: #C678DD\">}</span><span style=\"color: #98C379\">)`</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">call</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">axisBottom</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">xScale</span><span style=\"color: #ABB2BF\">));</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// 添加Y轴标签</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">bounds</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">append</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"text\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"transform\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #98C379\">\"rotate(-90)\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"y\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #56B6C2\">-</span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">margin</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">left</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">10</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"x\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #56B6C2\">-</span><span style=\"color: #E5C07B\">dimensions</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">boundedHeight</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">/</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">2</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">text</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"温度 (°C)\"</span><span style=\"color: #ABB2BF\">);</span></span></code></pre></div><h2 id=\"7-添加交互与动画（Add-Interactions-Animations）\"><a href=\"#7-添加交互与动画（Add-Interactions-Animations）\" class=\"headerlink\" title=\"7. 添加交互与动画（Add Interactions & Animations）\"></a>7. 添加交互与动画（Add Interactions &amp; Animations）</h2><p><strong>目标</strong>：通过事件监听和过渡效果增强用户体验。<br><strong>实现</strong>：  </p>\n<ul>\n<li>使用 <code>.on()</code> 绑定鼠标事件（如悬停、点击）。  </li>\n<li>通过 <code>.transition()</code> 实现平滑动画。</li>\n</ul>\n<p><strong>示例（悬停提示）</strong>：  </p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #E5C07B\">bounds</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">selectAll</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\".data-point\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">data</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">dataset</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">enter</span><span style=\"color: #ABB2BF\">().</span><span style=\"color: #61AFEF\">append</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"circle\"</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"cx\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">d</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">xScale</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">d</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">date</span><span style=\"color: #ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"cy\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">d</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">yScale</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">d</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">temperature</span><span style=\"color: #ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"r\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">3</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">on</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"mouseover\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75; font-style: italic\">event</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">d</span><span style=\"color: #ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">this</span><span style=\"color: #ABB2BF\">).</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"r\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">6</span><span style=\"color: #ABB2BF\">); </span><span style=\"color: #7F848E; font-style: italic\">// 放大点</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #7F848E; font-style: italic\">// 显示提示框</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #E5C07B\">tooltip</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"opacity\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">1</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">      .</span><span style=\"color: #61AFEF\">html</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">`日期：</span><span style=\"color: #C678DD\">${</span><span style=\"color: #E5C07B\">d</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">date</span><span style=\"color: #C678DD\">}</span><span style=\"color: #98C379\">&lt;br&gt;温度：</span><span style=\"color: #C678DD\">${</span><span style=\"color: #E5C07B\">d</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">temperature</span><span style=\"color: #C678DD\">}</span><span style=\"color: #98C379\">°C`</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  })</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  .</span><span style=\"color: #61AFEF\">on</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"mouseout\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\">() {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #E5C07B\">d3</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">select</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E5C07B\">this</span><span style=\"color: #ABB2BF\">).</span><span style=\"color: #61AFEF\">attr</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"r\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">3</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #E5C07B\">tooltip</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">style</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">\"opacity\"</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">0</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  });</span></span></code></pre></div><h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>这 7 步方法覆盖了从数据准备到交互设计的全流程，适用于大多数图表类型（如柱状图、散点图、地图等）。实际开发中可根据需求调整步骤顺序或合并操作，例如将比例尺定义与数据预处理结合。更多高级技巧（如响应式设计、性能优化）可参考《Fullstack D3》的进阶章节。</p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><p><a href=\"https://zhuanlan.zhihu.com/p/385236982\">安利一些不错的D3.js数据可视化资源</a></p>\n","text":"根据《Fullstack D3 and Data Visualization》的核心方法论，开发数据可视化通常遵循以下 7 步流程，这些步骤结合了数据驱动文档（...","permalink":"/post/d3/07步开发法","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"d3","slug":"d3","count":5,"path":"api/categories/d3.json"}],"tags":[{"name":"d3","slug":"d3","count":5,"path":"api/tags/d3.json"},{"name":"数据可视化","slug":"数据可视化","count":5,"path":"api/tags/数据可视化.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%EF%BC%88Access-Data%EF%BC%89\"><span class=\"toc-text\">1. 获取数据（Access Data）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-%E5%AE%9A%E4%B9%89%E5%9B%BE%E8%A1%A8%E5%B0%BA%E5%AF%B8%EF%BC%88Create-Chart-Dimensions%EF%BC%89\"><span class=\"toc-text\">2. 定义图表尺寸（Create Chart Dimensions）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E7%BB%98%E5%88%B6%E7%94%BB%E5%B8%83%EF%BC%88Draw-Canvas%EF%BC%89\"><span class=\"toc-text\">3. 绘制画布（Draw Canvas）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-%E5%88%9B%E5%BB%BA%E6%AF%94%E4%BE%8B%E5%B0%BA%EF%BC%88Create-Scales%EF%BC%89\"><span class=\"toc-text\">4. 创建比例尺（Create Scales）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-%E7%BB%98%E5%88%B6%E6%95%B0%E6%8D%AE%EF%BC%88Draw-Data%EF%BC%89\"><span class=\"toc-text\">5. 绘制数据（Draw Data）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#6-%E7%BB%98%E5%88%B6%E5%A4%96%E5%9B%B4%E5%85%83%E7%B4%A0%EF%BC%88Draw-Peripherals%EF%BC%89\"><span class=\"toc-text\">6. 绘制外围元素（Draw Peripherals）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#7-%E6%B7%BB%E5%8A%A0%E4%BA%A4%E4%BA%92%E4%B8%8E%E5%8A%A8%E7%94%BB%EF%BC%88Add-Interactions-Animations%EF%BC%89\"><span class=\"toc-text\">7. 添加交互与动画（Add Interactions &amp; Animations）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83\"><span class=\"toc-text\">参考</span></a></li></ol>","author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"js到底要不要加分号？","uid":"066dbf65de05ce712f1d73bffa64257b","slug":"js到底要不要加分号","date":"2025-09-29T15:06:22.035Z","updated":"2025-09-29T15:10:31.355Z","comments":true,"path":"api/articles/js到底要不要加分号.json","keywords":null,"cover":"https://cdn.stocksnap.io/img-thumbs/280h/alone-background_TJSWWAXG9T.jpg","text":"1. 争吵的由来行尾使用分号的风格来自于 Java，也来自于 C 语言和 C++，这一设计最初是为了降低编译器的工作负担。但是，从今天的角度来看，行尾使用分号其...","permalink":"/post/js到底要不要加分号","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","count":5,"path":"api/tags/JavaScript.json"}],"author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"SVG基础","uid":"abcf6118dce936e2c54c5f477d37d6f7","slug":"svg/svg","date":"2025-09-28T11:49:36.904Z","updated":"2025-09-28T14:00:34.908Z","comments":true,"path":"api/articles/svg/svg.json","keywords":null,"cover":"https://cdn.stocksnap.io/img-thumbs/280h/royal-tern_8KWRHDULDC.jpg","text":"概述SVG 全称为：可缩放矢量图形（Scalable Vector Graphics） 是一种用于描述二维图形的 XML 标记语言，对于图形的描述基于数学描述而...","permalink":"/post/svg/svg","photos":[],"count_time":{"symbolsCount":"5k","symbolsTime":"5 mins."},"categories":[{"name":"svg","slug":"svg","count":1,"path":"api/categories/svg.json"}],"tags":[{"name":"SVG","slug":"SVG","count":1,"path":"api/tags/SVG.json"}],"author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}
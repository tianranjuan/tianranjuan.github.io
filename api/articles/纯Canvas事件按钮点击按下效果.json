{"title":"纯Canvas事件按钮点击按下效果","uid":"0fbbceddbe858589d1dc31c9d206fd02","slug":"纯Canvas事件按钮点击按下效果","date":"2019-12-25T16:23:35.000Z","updated":"2023-12-18T13:28:02.962Z","comments":true,"path":"api/articles/纯Canvas事件按钮点击按下效果.json","keywords":null,"cover":[],"content":"<p>使用纯Canvas实现一个按钮点击按下的效果，类似下图</p>\n<p><img src=\"/../images/%E7%BA%AFCanvas%E4%BA%8B%E4%BB%B6%E6%8C%89%E9%92%AE%E7%82%B9%E5%87%BB%E6%8C%89%E4%B8%8B%E6%95%88%E6%9E%9C/image-20200408144716773.png\" alt=\"image-20200408144716773\"></p>\n<p>使用到的API<br>阴影偏移：</p>\n<ul>\n<li>shadowOffsetX &#x3D; float</li>\n<li>shadowOffsetY &#x3D; float</li>\n<li>用来实现有体积的视觉效果 效果等同于 <code>css</code>中的<code>shadow</code>属性</li>\n</ul>\n<p>阴影模糊：</p>\n<ul>\n<li>shadowBlur &#x3D; float</li>\n<li>设置阴影的模糊效果</li>\n</ul>\n<p>阴影颜色：</p>\n<ul>\n<li>shadowColor &#x3D; color</li>\n<li>设置阴影的颜色</li>\n</ul>\n<p>路径：</p>\n<ul>\n<li><a href=\"http://www.w3school.com.cn/tags/canvas_beginpath.asp\" title=\"HTML5 canvas beginPath() 方法\"><code>beginPath()</code></a> </li>\n<li><a href=\"http://www.w3school.com.cn/tags/canvas_moveto.asp\" title=\"HTML5 canvas moveTo() 方法\"><code>moveTo()</code></a></li>\n<li><a href=\"http://www.w3school.com.cn/tags/canvas_lineto.asp\" title=\"HTML5 canvas lineTo() 方法\"><code>lineTo()</code></a></li>\n<li><a href=\"http://www.w3school.com.cn/tags/canvas_quadraticcurveto.asp\" title=\"HTML5 canvas quadraticCurveTo() 方法\"><code>quadraticCurveTo()</code></a></li>\n<li><a href=\"http://www.w3school.com.cn/tags/canvas_closepath.asp\" title=\"HTML5 canvas closePath() 方法\"><code>closePath()</code></a></li>\n<li>以此为 <code>起始一条路径，或重置当前路径</code>、<code>把路径移动到画布中的指定点，不创建线条</code>、<code>\t添加一个新点，然后在画布中创建从该点到最后指定点的线条</code>、<code>创建二次贝塞尔曲线</code>、<code>\t创建从当前点回到起始点的路径</code></li>\n</ul>\n<p>具体实现：</p>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #282c34\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #ABB2BF\">&lt;!</span><span style=\"color: #E06C75\">DOCTYPE</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">html</span><span style=\"color: #ABB2BF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">&lt;</span><span style=\"color: #E06C75\">html</span><span style=\"color: #ABB2BF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">&lt;</span><span style=\"color: #E06C75\">body</span><span style=\"color: #ABB2BF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &lt;</span><span style=\"color: #E06C75\">canvas</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">id</span><span style=\"color: #ABB2BF\">=</span><span style=\"color: #98C379\">&quot;myCanvas&quot;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">width</span><span style=\"color: #ABB2BF\">=</span><span style=\"color: #98C379\">&quot;1000&quot;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">height</span><span style=\"color: #ABB2BF\">=</span><span style=\"color: #98C379\">&quot;800&quot;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">style</span><span style=\"color: #ABB2BF\">=</span><span style=\"color: #98C379\">&quot;border:1px solid #d3d3d3;&quot;</span><span style=\"color: #ABB2BF\">&gt;&lt;/</span><span style=\"color: #E06C75\">canvas</span><span style=\"color: #ABB2BF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &lt;</span><span style=\"color: #E06C75\">script</span><span style=\"color: #ABB2BF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #C678DD\">var</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">c</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">document</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">getElementById</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;myCanvas&quot;</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #C678DD\">var</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">ctx</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">c</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">getContext</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;2d&quot;</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #C678DD\">var</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">20</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #C678DD\">var</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">20</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #C678DD\">var</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">100</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #C678DD\">var</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">200</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #C678DD\">var</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">5</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #7F848E; font-style: italic\">// 绘制初始状态</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #61AFEF\">radiusRect</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">ctx</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #61AFEF\">setShadow</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">ctx</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #61AFEF\">draw</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">ctx</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #61AFEF\">cleartShadow</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">ctx</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #7F848E; font-style: italic\">// 绘制圆角矩形</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">radiusRect</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75; font-style: italic\">x</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">y</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">width</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">height</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">radius</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">ctx</span><span style=\"color: #ABB2BF\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #7F848E; font-style: italic\">// 开启路径</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">beginPath</span><span style=\"color: #ABB2BF\">()</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #7F848E; font-style: italic\">// 设置填充颜色</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">fillStyle</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;#0066CC&quot;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #7F848E; font-style: italic\">// 绘制边</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">moveTo</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">lineTo</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">-</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #7F848E; font-style: italic\">// 绘制圆角</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">quadraticCurveTo</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">lineTo</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">-</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">quadraticCurveTo</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">-</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">lineTo</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">quadraticCurveTo</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">-</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">lineTo</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">quadraticCurveTo</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #7F848E; font-style: italic\">// 闭合路径</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">closePath</span><span style=\"color: #ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #7F848E; font-style: italic\">// 设置阴影和偏移</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">setShadow</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75; font-style: italic\">ctx</span><span style=\"color: #ABB2BF\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">shadowOffsetX</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">0</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">shadowOffsetY</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">10</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7F848E; font-style: italic\">// 10个偏移量</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">shadowBlur</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">0</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">shadowColor</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;#006600&quot;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #7F848E; font-style: italic\">// 清楚掉阴影和位移</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">cleartShadow</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75; font-style: italic\">ctx</span><span style=\"color: #ABB2BF\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">shadowOffsetX</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">0</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">shadowOffsetY</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">0</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #7F848E; font-style: italic\">// 绘制到画布上</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">draw</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75; font-style: italic\">ctx</span><span style=\"color: #ABB2BF\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">stroke</span><span style=\"color: #ABB2BF\">()</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">fill</span><span style=\"color: #ABB2BF\">()</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        &#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #7F848E; font-style: italic\">//事件监听 按下时，持续的绘制为按下状态</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">c</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">addEventListener</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&#39;mousedown&#39;</span><span style=\"color: #ABB2BF\">, (</span><span style=\"color: #E06C75; font-style: italic\">e</span><span style=\"color: #ABB2BF\">) </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #C678DD\">if</span><span style=\"color: #ABB2BF\"> (</span><span style=\"color: #E5C07B\">e</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">clientX</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">&gt;=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">&amp;&amp;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">e</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">clientX</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">&lt;=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">&amp;&amp;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">e</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">clientY</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">&gt;=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">&amp;&amp;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">e</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">clientY</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">&lt;=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">&amp;&amp;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">e</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">                .</span><span style=\"color: #E06C75\">button</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">==</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">0</span><span style=\"color: #ABB2BF\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">                </span><span style=\"color: #E5C07B\">ctx</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">clearRect</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #D19A66\">0</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">0</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">1000</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">1000</span><span style=\"color: #ABB2BF\">) </span><span style=\"color: #7F848E; font-style: italic\">// 先清楚所有的矩形</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">                </span><span style=\"color: #61AFEF\">radiusRect</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">+</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">10</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">ctx</span><span style=\"color: #ABB2BF\">) </span><span style=\"color: #7F848E; font-style: italic\">// 10个偏移量</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">                </span><span style=\"color: #61AFEF\">draw</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">ctx</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            &#125;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        &#125;)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #7F848E; font-style: italic\">//事件监听 抬起时，恢复为初始状态</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E5C07B\">c</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">addEventListener</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&#39;mouseup&#39;</span><span style=\"color: #ABB2BF\">, (</span><span style=\"color: #E06C75; font-style: italic\">e</span><span style=\"color: #ABB2BF\">) </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #C678DD\">if</span><span style=\"color: #ABB2BF\"> (</span><span style=\"color: #E5C07B\">e</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E06C75\">button</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">==</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">0</span><span style=\"color: #ABB2BF\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">                </span><span style=\"color: #61AFEF\">setTimeout</span><span style=\"color: #ABB2BF\">(() </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">                    </span><span style=\"color: #61AFEF\">radiusRect</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">x</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">y</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">width</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">height</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">radius</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">ctx</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">                    </span><span style=\"color: #61AFEF\">setShadow</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">ctx</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">                    </span><span style=\"color: #61AFEF\">draw</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">ctx</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">                    </span><span style=\"color: #61AFEF\">cleartShadow</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">ctx</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">                &#125;, </span><span style=\"color: #D19A66\">100</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            &#125;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        &#125;)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &lt;/</span><span style=\"color: #E06C75\">script</span><span style=\"color: #ABB2BF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">&lt;/</span><span style=\"color: #E06C75\">body</span><span style=\"color: #ABB2BF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">&lt;/</span><span style=\"color: #E06C75\">html</span><span style=\"color: #ABB2BF\">&gt;</span></span></code></pre></div>","text":"使用纯Canvas实现一个按钮点击按下的效果，类似下图 使用到的API阴影偏移： shadowOffsetX = float shadowOffsetY = f...","permalink":"/post/纯Canvas事件按钮点击按下效果","photos":[],"count_time":{"symbolsCount":"3.2k","symbolsTime":"3 mins."},"categories":[],"tags":[],"toc":"","author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"使用VSCode编辑器debug调试Vue代码","uid":"90a976545b5488dd75ff7364ad12073f","slug":"使用VSCode编辑器debug调试Vue代码","date":"2019-12-25T16:24:33.000Z","updated":"2023-12-18T13:28:46.609Z","comments":true,"path":"api/articles/使用VSCode编辑器debug调试Vue代码.json","keywords":null,"cover":[],"text":" 环境为 vue-cli3、webpack、vscode 首先需要在VSCode中安装 Debugger for Chrome 插件 然后在debug配置中添加...","permalink":"/post/使用VSCode编辑器debug调试Vue代码","photos":[],"count_time":{"symbolsCount":830,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"如何跳过SourceTree的注册步骤，直接使用功能（3.2.6亲测有效）","uid":"429bc49bea45cd590028e18172e3c7b5","slug":"如何跳过SourceTree的注册步骤，直接使用功能（3.2.6亲测有效）","date":"2019-11-05T02:03:00.000Z","updated":"2023-12-18T13:28:27.060Z","comments":true,"path":"api/articles/如何跳过SourceTree的注册步骤，直接使用功能（3.2.6亲测有效）.json","keywords":null,"cover":null,"text":"首先在官网上下载 SourceTree 的安装包，我下载的时候最新版本是 3.2.6官方下载链接 安装好软件后，打开软件会提示必须使用 Bitbuket 的账号...","permalink":"/post/如何跳过SourceTree的注册步骤，直接使用功能（3.2.6亲测有效）","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"git","slug":"git","count":2,"path":"api/tags/git.json"}],"author":{"name":"天然卷打工战士","slug":"blog-author","avatar":"https://pic-blog-1255296193.cos.ap-beijing.myqcloud.com/touxiang.jpg","link":"/","description":"未看此花时， <br> 此花与汝同归于寂； <br> 来看此花时， <br> 此花颜色一时明白过来。","socials":{"github":"https://github.com/tianranjuan","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}